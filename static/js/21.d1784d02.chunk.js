(this["webpackJsonpgoose-frontend"]=this["webpackJsonpgoose-frontend"]||[]).push([[21],{964:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n(58),c=n(0),i=n(4),s=n(48),o=n(65),u=n(668),l=n(174),d=n(27),b=n(2),p=n.n(b),f=n(13),j=n(15),x=n(24),O=n(59),m=n(961),h=n(674),v=n(675),g=n(37),k=n(49),y=n(687),I=n(683),w=n(31),N=n(39),T=n(75),S=n(690),D=function(e){var t=S;return Object(T.a)(t,v.b,e)},C=function(e){if(!e)return[];for(var t=[],n=e.length,r=0;r<n;r++)e[r]?t.push(Object(N.fromWei)(e[r].toString(),"ether")):t.push(0);return t},F=function(e){if(!e)return[];var t=[];if(!e)return[];for(var n=e.length,r=0;r<n;r++)e[r]?t.push(parseInt(e[r].toString())):t.push(0);return t},M=function(e){var t=[];if(!e)return[];for(var n=e.length,r=0;r<n;r++)e[r]?t.push(parseFloat(e[r].toString())):t.push(0);return t},B=(n(12),function(e){var t=e.split("/");return{protocol:t[0],host:t[2],path:t.slice(3).join("/"),fullUrlArray:t}}),A=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"",description:"",image:"",rarity:"",error:""},e.prev=1,e.next=4,fetch(t);case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),z=Object(c.createContext)(null),P=function(e){var t=e.children,n=Object(c.useRef)(!0),a=Object(c.useState)({isInitialized:!1,hasClaimed:[],ownerById:[],countBurnt:0,startBlockNumber:0,endBlockNumber:0,totalSupplyDistributed:0,currentDistributedSupply:0,balanceOf:0,nftMap:{},allowMultipleClaims:!0,priceMultiplier:0,maxMintPerNft:0,amounts:[],maxMintByNft:[],prices:[],myMints:[],nftTableData:[]}),i=Object(x.a)(a,2),s=i[0],u=i[1],l=Object(o.m)().account,d=Object(y.a)(),b=s.isInitialized;Object(c.useEffect)((function(){(function(){var e=Object(j.a)(p.a.mark((function e(){var t,n,r,a,c,i,s,o,l,d,b,j,O,m,h,g,k,y,N,T;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w.a)(I,[{address:v.c,name:"startBlockNumber"},{address:v.c,name:"endBlockNumber"},{address:v.c,name:"countBurnt"},{address:v.c,name:"totalSupplyDistributed"},{address:v.c,name:"currentDistributedSupply"},{address:v.c,name:"allowMultipleClaims"},{address:v.c,name:"priceMultiplier"},{address:v.c,name:"maxMintPerNft"}]);case 3:t=e.sent,n=Object(x.a)(t,8),r=n[0],a=n[1],c=n[2],i=n[3],s=n[4],o=n[5],l=n[6],d=n[7],b=Object(x.a)(r,1),j=b[0],O=Object(x.a)(a,1),m=O[0],h=Object(x.a)(c,1),g=h[0],k=Object(x.a)(i,1),y=k[0],N=Object(x.a)(s,1),T=N[0],u((function(e){return Object(f.a)(Object(f.a)({},e),{},{isInitialized:!0,countBurnt:g.toNumber(),startBlockNumber:j.toNumber(),endBlockNumber:m.toNumber(),currentDistributedSupply:T.toNumber(),totalSupplyDistributed:y.toNumber(),allowMultipleClaims:o[0],priceMultiplier:parseFloat(l[0].toString()),maxMintPerNft:parseInt(d[0].toString())})})),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("an error occured",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}})()()}),[b,u]),Object(c.useEffect)((function(){l&&function(){var e=Object(j.a)(p.a.mark((function e(){var t,n,r,a,c,i,s,o,d,b,O,m,h,y,N,T,S;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=D(),e.next=4,Object(w.a)(I,[{address:v.c,name:"getMinted",params:[l]}]);case 4:return n=e.sent,r=n[0][0],a=F(n[0][1]),c=n[0][2],i=M(n[0][3]),s=C(n[0][4]),o=M(n[0][5]),e.next=13,t.methods.balanceOf(l).call();case 13:if(d=e.sent,b={},O=[],!(d>0)){e.next=29;break}for(m=function(){var e=Object(j.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.methods.tokenOfOwnerByIndex(l,n).call();case 3:return r=e.sent,e.next=6,t.methods.getNftId(r).call();case 6:return e.sent,e.abrupt("return",[parseInt(r,10)]);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(p.a.mark((function e(n){var r,a,c,i,s,o,u,d,b,f,j,x;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.methods.tokenOfOwnerByIndex(l,n).call();case 3:return r=e.sent,e.next=6,t.methods.tokenURI(parseInt(r,10)).call();case 6:return a=e.sent,e.next=9,t.methods.getApproved(parseInt(r,10)).call();case 9:return c=e.sent,i=!1,"0x0000000000000000000000000000000000000000"!==c&&(i=!0),e.next=14,A(a);case 14:return s=e.sent,o=s.name,s.rarity,u=B(a),d=u.fullUrlArray,b=d[3],f=parseInt(d[4].substring(0,d[4].length-5),10),j="/detail/".concat(f),x=v.d.filter((function(e){return o===e.name})).map((function(e){return e.previewImage})),e.abrupt("return",{tokenId:parseInt(r,10),type:"".concat(b," ,  ").concat(f),nftName:o,nftPreviewImage:x,nftDetailLink:j,isApproved:i});case 25:return e.prev=25,e.t0=e.catch(0),e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),y=[],N=[],T=0;T<d;T++)N.push(h(T)),y.push(m(T));return e.next=24,Promise.all(y);case 24:return S=e.sent,e.next=27,Promise.all(N);case 27:O=e.sent,b=S.reduce((function(e,t){if(!t)return e;var n=Object(x.a)(t,2),r=n[0],a=n[1];return Object(f.a)(Object(f.a)({},e),{},Object(g.a)({},r,e[r]?[].concat(Object(k.a)(e[r]),[a]):[a]))}),{});case 29:u((function(e){return Object(f.a)(Object(f.a)({},e),{},{isInitialized:!0,hasClaimed:r,ownerById:c,balanceOf:d,nftMap:b,amounts:a,maxMintByNft:i,prices:s,myMints:o,nftTableData:O})})),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),console.error("an error occured",e.t0);case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}()()}),[b,l,u]),Object(c.useEffect)((function(){return function(){n.current=!1}}),[n]);var O=d<=s.endBlockNumber;return Object(r.jsx)(z.Provider,{value:Object(f.a)(Object(f.a)({},s),{},{canBurnNft:O,getTokenIds:function(e){return s.nftMap[e]},reInitialize:function(){n.current&&u((function(e){return Object(f.a)(Object(f.a)({},e),{},{isInitialized:!1})}))}}),children:t})},L=n(130),W=n.n(L);function U(){var e=Object(a.a)(["\n  align-items: center;\n  display: flex;\n  justify-content: space-between;\n"]);return U=function(){return e},e}var E=i.e.div(U());function R(){var e=Object(a.a)(["\n  color: ",";\n  display: block;\n  margin-bottom: 8px;\n  margin-top: 24px;\n"]);return R=function(){return e},e}function J(){var e=Object(a.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  grid-gap: 8px;\n"]);return J=function(){return e},e}function q(){var e=Object(a.a)(["\n  margin-bottom: 16px;\n"]);return q=function(){return e},e}function Q(){var e=Object(a.a)(["\n  font-weight: 600;\n"]);return Q=function(){return e},e}var V=Object(i.e)(s.A)(Q()),G=i.e.div(q()),H=i.e.div(J()),K=i.e.label(R(),(function(e){return e.theme.colors.text})),X=function(e){var t=e.nft,n=e.tokenIds,a=e.onSuccess,i=e.onDismiss,l=Object(c.useState)(!1),d=Object(x.a)(l,2),b=d[0],O=d[1],m=Object(c.useState)({address:"",tokenId:n[0]}),k=Object(x.a)(m,2),y=k[0],I=k[1],w=Object(c.useState)(null),N=Object(x.a)(w,2),T=N[0],S=N[1],D=Object(u.a)(),C=Object(o.m)().account,F=Object(h.f)(v.c),M=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,W.a.utils.isAddress(y.address)){e.next=6;break}S(D(999,"Please enter a valid wallet address")),e.next=8;break;case 6:return e.next=8,F.methods.transferNft(y.address,y.tokenId).send({from:C}).on("sending",(function(){O(!0)})).on("receipt",(function(){i(),a()})).on("error",(function(){console.error(T),S("Unable to transfer NFT"),O(!1)}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Unable to transfer NFT:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(s.u,{title:D(999,"Transfer NFT"),onDismiss:i,children:[Object(r.jsxs)(G,{children:[T&&Object(r.jsx)(s.A,{color:"failure",mb:"8px",children:T}),Object(r.jsxs)(E,{children:[Object(r.jsxs)(s.A,{children:[D(999,"Transferring"),":"]}),Object(r.jsx)(V,{children:'1x "'.concat(t.name,'" NFT')})]}),Object(r.jsxs)(K,{htmlFor:"transferAddress",children:[D(999,"Receiving address"),":"]}),Object(r.jsx)(s.q,{id:"transferAddress",name:"address",type:"text",placeholder:D(999,"Paste address"),value:y.address,onChange:function(e){var t=e.target,n=t.value,r=t.name;I(Object(f.a)(Object(f.a)({},y),{},Object(g.a)({},r,n)))},isWarning:T,disabled:b})]}),Object(r.jsxs)(H,{children:[Object(r.jsx)(s.d,{fullWidth:!0,variant:"secondary",onClick:i,children:D(462,"Cancel")}),Object(r.jsx)(s.d,{fullWidth:!0,onClick:M,disabled:!C||b||!y.address||!y.tokenId,children:D(464,"Confirm")})]})]})},Y=function(){var e=Object(c.useState)({isLoading:!1,isOpen:!0,nftTableData:[]}),t=Object(x.a)(e,2),n=(t[0],t[1]),a=Object(o.m)().account,i=Object(c.useState)(!1),l=Object(x.a)(i,2),d=l[0],b=l[1],g=Object(c.useState)(!1),k=Object(x.a)(g,2),y=(k[0],k[1]),I=Object(c.useState)(null),w=Object(x.a)(I,2),N=(w[0],w[1]),T=Object(c.useContext)(z),S=T.nftTableData,D=T.reInitialize,C=Object(u.a)(),F=Object(c.useCallback)(Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0})}));try{n((function(e){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isDataFetched:!0,nftTableData:S})}))}catch(t){console.log(t)}case 2:case"end":return e.stop()}}),e)}))),[S]),M=Object(h.g)(v.b),B=Object(c.useCallback)(function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n((function(e){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0})})),b(!0),e.next=5,M.methods.approve(v.c,t).send({from:a}).on("sending",(function(){y(!0)})).on("receipt",(function(){console.log("receipt")})).on("error",(function(){N("Unable to transfer NFT"),y(!1)}));case 5:n((function(e){return Object(f.a)(Object(f.a)({},e),{},{isLoading:!1,isDataFetched:!0,nftTableData:S})})),D(),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[S,a,M,D]),A=function(){F(),D()},P=[{title:"NFT Name",dataIndex:"nftName",render:function(e,t){return Object(r.jsx)("p",{style:{fontWeight:600,fontSize:"18px"},children:t.nftName})}},{title:"NFT preview Image",dataIndex:"nftPreviewImage",render:function(e,t){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:"images/nfts/".concat(t.nftPreviewImage),alt:"preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"25px"}})})}},{title:"Token ID",dataIndex:"tokenId",key:"tokenId"},{title:"NFT Details",dataIndex:"nftDetailLink",render:function(e,t){return Object(r.jsx)(s.d,{as:O.b,to:t.nftDetailLink,children:"View Detail"})},key:"nftDetailLink"},{title:"Transfer NFT",dataIndex:"",render:function(e,t){var n={name:t.nftName,metadata:"",description:"",originalImage:"",previewImage:"",fileType:"",blurImage:"",sortOrder:1,nftId:0,tokenAmount:0,tokenSupply:0,nftFarmContract:"",nftContract:"",active:!1},a=t.isApproved,c=[t.tokenId],i=Object(s.w)(Object(r.jsx)(X,{nft:n,tokenIds:c,onSuccess:A})),o=Object(x.a)(i,1)[0];return a?Object(r.jsx)(s.d,{fullWidth:!0,variant:"primary",mt:"24px",onClick:function(){o()},children:C(999,"Transfer")}):Object(r.jsx)(s.d,{fullWidth:!0,variant:"primary",mt:"24px",onClick:function(){B(parseInt(t.tokenId,10))},disabled:d,children:"Approve"})},key:""}];return Object(r.jsx)(m.a,{columns:P,dataSource:S,style:{marginTop:"25px"}})},Z=function(){var e=Object(u.a)(),t=Object(c.useContext)(z).balanceOf;return Object(r.jsx)(s.g,{children:Object(r.jsx)(s.h,{children:Object(r.jsxs)(E,{children:[Object(r.jsxs)(s.A,{children:[e(999,"My Ticket NFTs"),":"]}),Object(r.jsx)(s.A,{children:Object(r.jsx)("strong",{children:t})})]})})})};function $(){var e=Object(a.a)(["\n  align-items: start;\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-gap: 32px;\n\n  "," {\n    grid-template-columns: repeat(2, 1fr);\n  }\n"]);return $=function(){return e},e}i.e.div($(),(function(e){return e.theme.mediaQueries.sm}));var _=function(){Object(c.useContext)(z).canBurnNft;return Object(r.jsx)(Z,{})};function ee(){var e=Object(a.a)(["\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(110, 80, 20, 0.4), inset 0 -2px 5px 1px rgba(139, 66, 8, 1),\n    inset 0 -1px 1px 3px rgba(250, 227, 133, 1);\n  background-image: linear-gradient(160deg, #a54e07, #b47e11, #fef1a2, #bc881b, #a54e07);\n  border: 1px solid #a55d07;\n  color: rgb(120, 50, 5);\n  text-shadow: 0 2px 2px rgba(250, 227, 133, 1);\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  background-size: 100% 100%;\n  background-position: center;\n\n  &:focus,\n  &:hover {\n    background-size: 150% 150%;\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23), inset 0 -2px 5px 1px #b17d10,\n      inset 0 -1px 1px 3px rgba(250, 227, 133, 1);\n    border: 1px solid rgba(165, 93, 7, 0.6);\n    color: rgba(120, 50, 5, 0.8);\n  }\n  &:active {\n    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(110, 80, 20, 0.4), inset 0 -2px 5px 1px #b17d10,\n      inset 0 -1px 1px 3px rgba(250, 227, 133, 1);\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(a.a)(["\n  margin-right: 20px;\n"]);return te=function(){return e},e}function ne(){var e=Object(a.a)(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 64px);\n  justify-content: center;\n"]);return ne=function(){return e},e}function re(){var e=Object(a.a)(["\n  border-bottom: 1px solid ",";\n  margin-bottom: 24px;\n  padding-bottom: 32px;\n"]);return re=function(){return e},e}var ae=i.e.div(re(),(function(e){return e.theme.colors.textSubtle})),ce=i.e.div(ne()),ie=Object(i.e)(s.d)(te());Object(i.e)(s.d)(ee()),t.default=function(){var e=Object(u.a)(),t=Object(o.m)().account;Object(d.f)();return t?Object(r.jsx)(P,{children:Object(r.jsxs)(l.a,{children:[Object(r.jsxs)(ae,{children:[Object(r.jsx)(s.n,{as:"h1",size:"xl",color:"secondary",mb:"24px",children:"My NFT Collections"}),Object(r.jsx)(ie,{mt:"24px",children:"Ticket NFTs"})]}),Object(r.jsx)(_,{}),Object(r.jsx)(Y,{})]})}):Object(r.jsx)(l.a,{children:Object(r.jsxs)(ce,{children:[Object(r.jsx)(s.s,{width:"64px",mb:"8px"}),Object(r.jsx)(s.A,{mb:"16px",children:e(999,"Empty Collection")})]})})}}}]);
//# sourceMappingURL=21.d1784d02.chunk.js.map